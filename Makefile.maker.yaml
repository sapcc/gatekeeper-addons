# Configuration file for <https://github.com/sapcc/go-makefile-maker>

binaries:
  - name:        doop-agent
    fromPackage: ./doop-agent
    installTo:   bin/
  - name:        doop-central
    fromPackage: ./doop-central
    installTo:   bin/
  - name:        doop-image-checker
    fromPackage: ./doop-image-checker
    installTo:   bin/
  - name:        helm-manifest-parser
    fromPackage: ./helm-manifest-parser
    installTo:   bin/

vendoring:
  enabled: true

golangciLint:
  createConfig: true

githubWorkflow:
  global:
    assignees:
      - SuperSandro2000
    ignorePaths: [ "**.md" ] # all Markdown files
  ci:
    enabled: true
    coveralls: true
    postgres:
      enabled: true
  license:
    enabled: true
  securityChecks:
    enabled: true
  spellCheck:
    enabled: true

renovate:
  enabled: true

verbatim: |
  DOCKER_REPO = keppel.eu-de-1.cloud.sap/ccloud/doop
  DOCKER_TAG  = $(shell git describe --abbrev=10 --always --dirty)

  SUDO ?= $(shell if ! groups 2>/dev/null | grep -q docker; then echo sudo --preserve-env=DOCKER_BUILDKIT,DOCKER_CLI_EXPERIMENTAL,DOCKER_HOST,HOME,PWD; fi)
  push:
    $(SUDO) docker build -t $(DOCKER_REPO):$(DOCKER_TAG) .
    $(SUDO) docker push $(DOCKER_REPO):$(DOCKER_TAG)

